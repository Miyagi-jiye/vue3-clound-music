import{_ as A,o as c,c as r,k as n,t as u,F as C,A as T,q as _,B as P,a as m,I as B,e as L,u as V,z as I,s as F,w as R,W as z,r as D,L as H,b as o,j as b,m as N,l as v,v as U}from"./index.59ff27cd.js";import{M as $}from"./MoreText.d56bfc2b.js";import{P as j}from"./PlayAllButton.9ecbc09c.js";import{L as E}from"./loadMore.05107891.js";import{S as Y}from"./songComments.5cf55747.js";import{S as q}from"./songList.9cd92cc6.js";import{F as M,G}from"./index.b4f22b98.js";import"./playlist.8397c764.js";import"./timestamp.f9a1ea68.js";import"./index.e83cf604.js";import"./login.85051db2.js";import"./discover.48be4439.js";const O={class:"info"},W={class:"flex"},J={class:"left"},K=["src"],Q={class:"right"},X={class:"title"},Z={class:"alias"},tt={class:"box"},et={key:0},at={key:1},st={class:"description"},ot={__name:"info",props:{myData:{type:Object}},setup(e){function a(s){s=s||null;let t=new Date(s),i=t.getFullYear()+"-",f=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",l=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ";return(t.getHours()<10?"0"+t.getHours():t.getHours())+"",(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+"",t.getSeconds()<10?""+t.getSeconds():t.getSeconds(),i+f+l}return(s,t)=>(c(),r("div",O,[n("div",W,[n("div",J,[n("img",{src:e.myData.album.picUrl+"?param=180y180",alt:"\u5C01\u9762"},null,8,K)]),n("div",Q,[n("p",X,u(e.myData.album.name),1),n("div",Z,[(c(!0),r(C,null,T(e.myData.album.artists,i=>(c(),r("p",null,u(i.name),1))),256))]),n("div",tt,[n("p",null,"\u53D1\u5E03\u65F6\u95F4\uFF1A"+u(a(e.myData.album.publishTime)),1),e.myData.album.subType?(c(),r("p",et,"\u97F3\u6E90\uFF1A"+u(e.myData.album.subType),1)):_("",!0),e.myData.album.company?(c(),r("p",at,"\u7248\u6743\uFF1A"+u(e.myData.album.company),1)):_("",!0)]),n("div",st,[e.myData.album.description?(c(),P($,{key:0,text:e.myData.album.description,end:90},null,8,["text"])):_("",!0)]),m(j,{myData:e.myData.songs},null,8,["myData"])])])]))}},nt=A(ot,[["__scopeId","data-v-0c720f84"]]),x=B("albumDetail",{state:()=>({album:{album:{},songs:[]},commentAlbum:{comments:[],hotComments:[],total:100},commentAlbumParams:{limit:20,offset:1},commentMoreParams:{limit:20,offset:1}}),getters:{},actions:{async get_commentAlbum(e){const a=await M(e,this.commentAlbumParams);this.commentAlbum=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BC4\u8BBA",a.data)},async get_commentMore(e){const a=await M(e,this.commentMoreParams);a.data.more!=!1&&(a.data.comments.forEach(s=>{this.commentAlbum.comments.push(s)}),console.log("\u83B7\u53D6\u66F4\u591A\u4E13\u8F91\u8BC4\u8BBA",a.data))},async get_album(e){const a=await G(e);this.album=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BE6\u60C5",a.data)}}});const mt={key:0,class:"albumDetail"},lt={__name:"index",setup(e){let a=L("tracks");V();const s=I(),{get_album:t,get_commentAlbum:i,get_commentMore:f}=x(),{commentAlbum:l,album:d,commentMoreParams:g}=F(x());t(s.params.id),i(s.params.id),R(()=>s.params.id,()=>{s.name=="albumDetail"&&(t(s.params.id),i(s.params.id))});const k=()=>{a.value=="comments"&&(g.value.offset++,f(s.params.id))};return z(()=>{g.value.offset=1,console.log("\u5378\u8F7D")}),(ct,y)=>{const p=D("el-tab-pane"),S=D("el-tabs"),w=H("infinite-scroll");return o(d).songs?(c(),r("div",mt,[m(nt,{myData:o(d),class:"info"},null,8,["myData"]),m(S,{modelValue:o(a),"onUpdate:modelValue":y[0]||(y[0]=h=>N(a)?a.value=h:a=h),class:"tab"},{default:b(()=>[m(p,{lazy:"",label:`\u6B4C\u66F2 ${o(d).songs.length}`,name:"tracks"},{default:b(()=>[m(q,{tracks:o(d).songs,options:1,class:"songList"},null,8,["tracks"])]),_:1},8,["label"]),m(p,{lazy:"",label:`\u8BC4\u8BBA ${o(l).total}`,name:"comments"},{default:b(()=>[v(m(Y,{comments:o(l).comments,hotComments:o(l).hotComments,class:"comment"},null,8,["comments","hotComments"]),[[w,k]]),v(m(E,null,null,512),[[U,o(l).total>o(l).comments.length]])]),_:1},8,["label"])]),_:1},8,["modelValue"])])):_("",!0)}}},vt=A(lt,[["__scopeId","data-v-4ef47230"]]);export{vt as default};
