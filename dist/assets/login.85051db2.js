import{I as e,E as a}from"./index.59ff27cd.js";import{c as s,d as t,e as i,f as n,g as r,h as g,i as l,j as c}from"./index.b4f22b98.js";const y=e("login",{state:()=>({loginParams:{phone:"",password:""},loginData:{account:{},profile:{userId:0,nickname:"\u7528\u6237\u540D",signature:"\u4E2A\u6027\u7B7E\u540D",gender:1,avatarUrl:"\u7528\u6237\u5934\u50CF",backgroundUrl:"\u80CC\u666F\u56FE\u7247",birthday:0,city:0,province:0,vipType:0,playlistCount:0,followeds:0,follows:0,eventCount:0,followed:!1,followMe:!1},bindings:[],token:"",cookie:""},isLogin:!1,visitorCookie:"",dialogVisible:!1,loginQrKey:"",loginQrUrl:""}),getters:{getCookie(o){return o.loginData.cookie}},actions:{async get_login(){try{const o=await s(this.loginParams);if(o.data.code==502)a({showClose:!0,grouping:!0,message:o.data.msg?o.data.msg:"\u767B\u5F55\u5931\u8D25",type:"error"}),console.log("\u767B\u5F55\u5931\u8D25",o.data);else return a({showClose:!0,grouping:!0,message:o.data.msg?o.data.msg:"\u767B\u5F55\u6210\u529F",type:"success"}),this.loginData=o.data,this.isLogin=!0,this.dialogVisible=!1,console.log("\u767B\u5F55\u6210\u529F",o.data),o.data}catch(o){console.log("\u767B\u5F55\u6355\u83B7\u9519\u8BEF",o)}},async get_logout(){const o=await t();o.data.code==200&&(this.isLogin=!1,a.success({message:"\u9000\u51FA\u6210\u529F"})),console.log("\u9000\u51FA\u767B\u5F55",o.data)},async get_registerAnonimous(){const o=await i();this.visitorCookie=o.data.cookie,console.log("\u83B7\u53D6\u6E38\u5BA2cookie",o.data)},async get_loginQrKey(){const o=await n();this.loginQrKey=o.data.data.unikey,console.log("\u83B7\u53D6\u4E8C\u7EF4\u7801key",o.data)},async get_loginQrCreate(){const o=await r(this.loginQrKey);this.loginQrUrl=o.data.data.qrurl,console.log("\u83B7\u53D6\u4E8C\u7EF4\u7801",o.data)},async get_loginQrCheck(){const o=await g(this.loginQrKey);return console.log("\u68C0\u6D4B\u4E8C\u7EF4\u7801\u72B6\u6001",o.data),o.data},async get_userAccount(){const o=await l();return this.loginData=o.data,console.log("\u83B7\u53D6\u7528\u6237\u4FE1\u606F",o.data),o.data},async get_loginStatus(){const o=await c();console.log("\u83B7\u53D6\u767B\u5F55\u72B6\u6001",o.data)}},persist:!0});export{y as u};
