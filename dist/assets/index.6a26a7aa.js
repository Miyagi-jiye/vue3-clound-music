import{_ as A,L as k,o as c,c as i,k as m,l as g,t as d,F as T,A as P,q as b,a as n,I as L,e as V,u as z,z as I,s as B,w as R,W as F,r as v,b as o,j as f,m as H,v as N}from"./index.20afdda4.js";import{M as U}from"./MoreText.887ac5c6.js";import{P as $}from"./PlayAllButton.f9766472.js";import{L as j}from"./loadMore.f8451d4e.js";import{S as E}from"./songComments.310f7a86.js";import{S as Y}from"./songList.4c2c89cb.js";import{J as M,K as q}from"./index.0030c387.js";import"./playlist.49ddd19e.js";import"./timestamp.f9a1ea68.js";import"./index.214e58df.js";import"./login.39523e6e.js";import"./discover.8ceba2c6.js";const J={class:"info"},K={class:"flex"},O={class:"left"},W={alt:"\u5C01\u9762"},G={class:"right"},Q={class:"title"},X={class:"alias"},Z={class:"box"},tt={key:0},et={key:1},at={key:0,class:"description"},st={__name:"info",props:{myData:{type:Object}},setup(e){function a(s){s=s||null;let t=new Date(s),r=t.getFullYear()+"-",u=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",l=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ";return(t.getHours()<10?"0"+t.getHours():t.getHours())+"",(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+"",t.getSeconds()<10?""+t.getSeconds():t.getSeconds(),r+u+l}return(s,t)=>{const r=k("lazy");return c(),i("div",J,[m("div",K,[m("div",O,[g(m("img",W,null,512),[[r,e.myData.album.picUrl+"?param=180y180"]])]),m("div",G,[m("p",Q,d(e.myData.album.name),1),m("div",X,[(c(!0),i(T,null,P(e.myData.album.artists,u=>(c(),i("p",null,d(u.name),1))),256))]),m("div",Z,[m("p",null,"\u53D1\u5E03\u65F6\u95F4\uFF1A"+d(a(e.myData.album.publishTime)),1),e.myData.album.subType?(c(),i("p",tt,"\u97F3\u6E90\uFF1A"+d(e.myData.album.subType),1)):b("",!0),e.myData.album.company?(c(),i("p",et,"\u7248\u6743\uFF1A"+d(e.myData.album.company),1)):b("",!0)]),e.myData.album.description?(c(),i("div",at,[n(U,{text:e.myData.album.description,end:90},null,8,["text"])])):b("",!0),n($,{myData:e.myData.songs},null,8,["myData"])])])])}}},ot=A(st,[["__scopeId","data-v-c4467b2d"]]),x=L("albumDetail",{state:()=>({album:{album:{},songs:[]},commentAlbum:{comments:[],hotComments:[],total:100},commentAlbumParams:{limit:20,offset:1},commentMoreParams:{limit:20,offset:1}}),getters:{},actions:{async get_commentAlbum(e){const a=await M(e,this.commentAlbumParams);this.commentAlbum=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BC4\u8BBA",a.data)},async get_commentMore(e){const a=await M(e,this.commentMoreParams);a.data.more!=!1&&(a.data.comments.forEach(s=>{this.commentAlbum.comments.push(s)}),console.log("\u83B7\u53D6\u66F4\u591A\u4E13\u8F91\u8BC4\u8BBA",a.data))},async get_album(e){const a=await q(e);this.album=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BE6\u60C5",a.data)}}});const nt={key:0,class:"albumDetail"},mt={__name:"index",setup(e){let a=V("tracks");z();const s=I(),{get_album:t,get_commentAlbum:r,get_commentMore:u}=x(),{commentAlbum:l,album:_,commentMoreParams:y}=B(x());t(s.params.id),r(s.params.id),R(()=>s.params.id,()=>{s.name=="albumDetail"&&(t(s.params.id),r(s.params.id))});const S=()=>{a.value=="comments"&&(y.value.offset++,u(s.params.id))};return F(()=>{y.value.offset=1,console.log("\u5378\u8F7D")}),(lt,p)=>{const h=v("el-tab-pane"),w=v("el-tabs"),C=k("infinite-scroll");return o(_).songs?(c(),i("div",nt,[n(ot,{myData:o(_),class:"info"},null,8,["myData"]),n(w,{modelValue:o(a),"onUpdate:modelValue":p[0]||(p[0]=D=>H(a)?a.value=D:a=D),class:"tab"},{default:f(()=>[n(h,{lazy:"",label:`\u6B4C\u66F2 ${o(_).songs.length}`,name:"tracks"},{default:f(()=>[n(Y,{tracks:o(_).songs,options:1,class:"songList"},null,8,["tracks"])]),_:1},8,["label"]),n(h,{lazy:"",label:`\u8BC4\u8BBA ${o(l).total}`,name:"comments"},{default:f(()=>[g(n(E,{comments:o(l).comments,hotComments:o(l).hotComments,class:"comment"},null,8,["comments","hotComments"]),[[C,S]]),g(n(j,null,null,512),[[N,o(l).total>o(l).comments.length]])]),_:1},8,["label"])]),_:1},8,["modelValue"])])):b("",!0)}}},Dt=A(mt,[["__scopeId","data-v-4ef47230"]]);export{Dt as default};
