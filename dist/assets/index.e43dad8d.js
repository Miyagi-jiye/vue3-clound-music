import{o as u,c as d,b as n,t as i,F as w,q as T,d as P,I as D,x as V,a6 as M,a7 as L,r as B,e as H,m as I,C as R,K as U,Y as E,a as x,u as o,f as l,w as b,i as F,G as N,H as Y}from"./index.00c0fa83.js";import{M as $}from"./MoreText.a3e103e3.js";import{_ as S}from"./_plugin-vue_export-helper.cdc0426e.js";import{L as z}from"./loadMore.b25e7fee.js";import{S as j}from"./songComments.05721fb0.js";import{S as q}from"./songList.54806399.js";const G={class:"info"},K={class:"flex"},O={class:"left"},J=["src"],Q={class:"right"},W={class:"title"},X={class:"alias"},Z={class:"box"},ee={class:"description"},te={__name:"info",props:{album:{type:Object,default:()=>({name:"\u4E13\u8F91\u540D",picUrl:"",subType:"\u97F3\u6E90",company:"\u7248\u6743",artists:[{name:"\u6B4C\u624B"}],publishTime:123456})}},setup(t){function a(s){s=s||null;let e=new Date(s),c=e.getFullYear()+"-",_=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",m=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ";return(e.getHours()<10?"0"+e.getHours():e.getHours())+"",(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+"",e.getSeconds()<10?""+e.getSeconds():e.getSeconds(),c+_+m}return(s,e)=>(u(),d("div",G,[n("div",K,[n("div",O,[n("img",{src:t.album.picUrl+"?param=180y180",alt:"\u5C01\u9762"},null,8,J)]),n("div",Q,[n("p",W,i(t.album.name),1),n("div",X,[(u(!0),d(w,null,T(t.album.artists,c=>(u(),d("p",null,i(c.name),1))),256))]),n("div",Z,[n("p",null,"\u53D1\u5E03\u65F6\u95F4\uFF1A"+i(a(t.album.publishTime)),1),n("p",null,"\u97F3\u6E90\uFF1A"+i(t.album.subType),1),n("p",null,"\u7248\u6743\uFF1A"+i(t.album.company),1)]),n("div",ee,[t.album.description?(u(),P($,{key:0,text:t.album.description,end:90},null,8,["text"])):D("",!0)])])])]))}},se=S(te,[["__scopeId","data-v-8ea1592c"]]),A=V("albumDetail",{state:()=>({album:{},commentAlbum:{comments:[],hotComments:[],total:100},commentAlbumParams:{limit:20,offset:1},commentMoreParams:{limit:20,offset:1}}),getters:{},actions:{async get_commentAlbum(t){const a=await M(t,this.commentAlbumParams);this.commentAlbum=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BC4\u8BBA",a.data)},async get_commentMore(t){(await M(t,this.commentMoreParams)).data.comments.forEach(s=>{this.commentAlbum.comments.push(s)}),console.log("\u83B7\u53D6\u66F4\u591A\u4E13\u8F91\u8BC4\u8BBA",this.commentAlbum.comments)},async get_album(t){const a=await L(t);this.album=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BE6\u60C5",a.data)}}});const ae={key:0,class:"albumDetail"},oe={__name:"index",setup(t){let a=B("tracks");H();const s=I(),{get_album:e,get_commentAlbum:c,get_commentMore:_}=A(),{commentAlbum:m,album:r,commentAlbumParams:f,commentMoreParams:g}=R(A());e(s.params.id),c(s.params.id),U(()=>s.params.id,()=>{s.name=="albumDetail"&&(e(s.params.id),c(s.params.id))});const C=p=>{g.value.offset=p,_(s.params.id)};return E(()=>{g.value.offset=1,console.log("\u5378\u8F7D")}),(p,h)=>{const v=x("el-tab-pane"),k=x("el-tabs");return o(r).songs?(u(),d("div",ae,[l(se,{album:o(r).album,class:"info"},null,8,["album"]),l(k,{modelValue:o(a),"onUpdate:modelValue":h[0]||(h[0]=y=>F(a)?a.value=y:a=y),class:"tab"},{default:b(()=>[l(v,{lazy:"",label:`\u6B4C\u66F2 ${o(r).songs.length}`,name:"tracks"},{default:b(()=>[l(q,{tracks:o(r).songs,options:1,class:"songList"},null,8,["tracks"])]),_:1},8,["label"]),l(v,{lazy:"",label:`\u8BC4\u8BBA ${o(m).total}`,name:"comments"},{default:b(()=>[l(j,{comments:o(m).comments,hotComments:o(m).hotComments,class:"comment"},null,8,["comments","hotComments"]),N(l(z,{limit:o(f).limit,offset:o(f).offset,onEmitloadMore:C,class:"loadMore"},null,8,["limit","offset"]),[[Y,o(m).total>o(m).comments.length]])]),_:1},8,["label"])]),_:1},8,["modelValue"])])):D("",!0)}}},re=S(oe,[["__scopeId","data-v-d4ca0f66"]]);export{re as default};
