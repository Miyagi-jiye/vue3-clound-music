import{o as i,c as u,b as l,t as r,F as w,m as T,d as P,I as D,v as V,a4 as y,a5 as B,r as I,e as N,l as $,B as H,J as L,a as x,u as o,f as c,w as b,i as R,G as E,H as F}from"./index.93b6dbdf.js";import{M as U}from"./MoreText.bd538088.js";import{_ as f}from"./_plugin-vue_export-helper.cdc0426e.js";import{S as z}from"./songComments.dfcd086d.js";import{S as Y}from"./songList.d37dd44b.js";const j={class:"info"},G={class:"flex"},J={class:"left"},O=["src"],q={class:"right"},K={class:"title"},Q={class:"alias"},W={class:"box"},X={class:"description"},Z={__name:"info",props:{album:{type:Object,default:()=>({name:"\u4E13\u8F91\u540D",picUrl:"",subType:"\u97F3\u6E90",company:"\u7248\u6743",artists:[{name:"\u6B4C\u624B"}],publishTime:123456})}},setup(t){function a(s){s=s||null;let e=new Date(s),n=e.getFullYear()+"-",d=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",m=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ";return(e.getHours()<10?"0"+e.getHours():e.getHours())+"",(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+"",e.getSeconds()<10?""+e.getSeconds():e.getSeconds(),n+d+m}return(s,e)=>(i(),u("div",j,[l("div",G,[l("div",J,[l("img",{src:t.album.picUrl+"?param=180y180",alt:"\u5C01\u9762"},null,8,O)]),l("div",q,[l("p",K,r(t.album.name),1),l("div",Q,[(i(!0),u(w,null,T(t.album.artists,n=>(i(),u("p",null,r(n.name),1))),256))]),l("div",W,[l("p",null,"\u53D1\u5E03\u65F6\u95F4\uFF1A"+r(a(t.album.publishTime)),1),l("p",null,"\u97F3\u6E90\uFF1A"+r(t.album.subType),1),l("p",null,"\u7248\u6743\uFF1A"+r(t.album.company),1)]),l("div",X,[t.album.description?(i(),P(U,{key:0,text:t.album.description,end:90},null,8,["text"])):D("",!0)])])])]))}},ee=f(Z,[["__scopeId","data-v-8ea1592c"]]);const te={class:"loadMore"},se={__name:"loadMore",props:{limit:{type:Number,default:()=>20},offset:{type:Number,default:()=>1}},emits:["emitloadMore"],setup(t,{emit:a}){let e=t.offset;const n=()=>{e++,a("emitloadMore",e),console.log(e)};return(d,m)=>(i(),u("div",te,[l("p",{onClick:n},"\u52A0\u8F7D\u66F4\u591A")]))}},ae=f(se,[["__scopeId","data-v-239d3bc2"]]),A=V("albumDetail",{state:()=>({album:{},commentAlbum:{comments:[],hotComments:[],total:100},commentAlbumParams:{limit:20,offset:1},commentMoreParams:{limit:20,offset:1}}),getters:{},actions:{async get_commentAlbum(t){const a=await y(t,this.commentAlbumParams);this.commentAlbum=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BC4\u8BBA",a.data)},async get_commentMore(t){(await y(t,this.commentMoreParams)).data.comments.forEach(s=>{this.commentAlbum.comments.push(s)}),console.log("\u83B7\u53D6\u66F4\u591A\u4E13\u8F91\u8BC4\u8BBA",this.commentAlbum.comments)},async get_album(t){const a=await B(t);this.album=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BE6\u60C5",a.data)}}});const oe={key:0,class:"albumDetail"},le={__name:"index",setup(t){let a=I("tracks");N();const s=$(),{get_album:e,get_commentAlbum:n,get_commentMore:d}=A(),{commentAlbum:m,album:_,commentAlbumParams:p,commentMoreParams:S}=H(A());e(s.params.id),n(s.params.id),L(()=>s.params.id,()=>{s.name=="albumDetail"&&(e(s.params.id),n(s.params.id))});const k=g=>{S.value.offset=g,d(s.params.id)};return(g,h)=>{const v=x("el-tab-pane"),C=x("el-tabs");return o(_).songs?(i(),u("div",oe,[c(ee,{album:o(_).album,class:"info"},null,8,["album"]),c(C,{modelValue:o(a),"onUpdate:modelValue":h[0]||(h[0]=M=>R(a)?a.value=M:a=M),class:"tab"},{default:b(()=>[c(v,{lazy:"",label:`\u6B4C\u66F2 ${o(_).songs.length}`,name:"tracks"},{default:b(()=>[c(Y,{tracks:o(_).songs,options:1,class:"songList"},null,8,["tracks"])]),_:1},8,["label"]),c(v,{lazy:"",label:`\u8BC4\u8BBA ${o(m).total}`,name:"comments"},{default:b(()=>[c(z,{comments:o(m).comments,hotComments:o(m).hotComments,class:"comment"},null,8,["comments","hotComments"]),E(c(ae,{limit:o(p).limit,offset:o(p).offset,onEmitloadMore:k,class:"loadMore"},null,8,["limit","offset"]),[[F,o(m).total!==o(m).comments.length]])]),_:1},8,["label"])]),_:1},8,["modelValue"])])):D("",!0)}}},ue=f(le,[["__scopeId","data-v-2164f6d3"]]);export{ue as default};
