import{A as C,_ as k,s as y,a as d,o as i,c as u,b as a,f as n,p as T,k as $,t as _,F as B,m as L,h as f,d as V,r as z,e as R,l as H,G as U,R as F,H as N,u as l,w as g,i as W,v as S,x as E}from"./index.be1b8bc8.js";import{M as Y}from"./MoreText.87a43a68.js";import{u as j}from"./playlist.6b9f79ff.js";import{t as D,v as G}from"./login.01d2fdc0.js";import{L as O}from"./loadMore.167c6510.js";import{S as q}from"./songComments.23e25cb4.js";import{S as J}from"./songList.70ea2788.js";import"./vue.73cea66e.js";import"./timestamp.f9a1ea68.js";import"./index.67b8870d.js";const v=C("albumDetail",{state:()=>({album:{},commentAlbum:{comments:[],hotComments:[],total:100},commentAlbumParams:{limit:20,offset:1},commentMoreParams:{limit:20,offset:1}}),getters:{},actions:{async get_commentAlbum(t){const s=await D(t,this.commentAlbumParams);this.commentAlbum=s.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BC4\u8BBA",s.data)},async get_commentMore(t){const s=await D(t,this.commentMoreParams);s.data.more!=!1&&(s.data.comments.forEach(o=>{this.commentAlbum.comments.push(o)}),console.log("\u83B7\u53D6\u66F4\u591A\u4E13\u8F91\u8BC4\u8BBA",s.data))},async get_album(t){const s=await G(t);this.album=s.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BE6\u60C5",s.data)}}});const I=t=>(T("data-v-4949fe7c"),t=t(),$(),t),K={class:"playAllButton"},Q=I(()=>a("span",null,"\u64AD\u653E\u5168\u90E8",-1)),X={class:"btn2"},Z=I(()=>a("span",null,"\u6536\u85CF",-1)),tt={class:"btn3"},et={__name:"PlayAllButton",setup(t){const{album:s}=y(v()),{toPlayList:o,currentPlayMusic:e}=y(j()),c=()=>{o.value=s.value.songs,e.value=s.value.songs[0]};return(p,m)=>{const r=d("icon-play-one"),b=d("icon-like"),h=d("icon-more");return i(),u("div",K,[a("button",{class:"btn1",onClick:c},[n(r,{class:"playIcon",theme:"outline",size:"22",strokeWidth:4,title:"\u70B9\u51FB\u64AD\u653E"}),Q]),a("button",X,[n(b,{class:"playIcon",theme:"outline",size:"18",strokeWidth:4,title:"\u70B9\u51FB\u6536\u85CF"}),Z]),a("button",tt,[n(h,{class:"playIcon",theme:"outline",size:"18",strokeWidth:4,title:"\u66F4\u591A"})])])}}},st=k(et,[["__scopeId","data-v-4949fe7c"]]);const ot={class:"info"},at={class:"flex"},nt={class:"left"},lt=["src"],ct={class:"right"},mt={class:"title"},it={class:"alias"},ut={class:"box"},rt={key:0},_t={key:1},dt={class:"description"},pt={__name:"info",props:{album:{type:Object,default:()=>({id:0,name:"\u4E13\u8F91\u540D",picUrl:"",subType:"\u97F3\u6E90",company:"\u7248\u6743",artists:[{name:"\u6B4C\u624B"}],publishTime:123456})}},setup(t){function s(o){o=o||null;let e=new Date(o),c=e.getFullYear()+"-",p=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",m=(e.getDate()<10?"0"+e.getDate():e.getDate())+" ";return(e.getHours()<10?"0"+e.getHours():e.getHours())+"",(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())+"",e.getSeconds()<10?""+e.getSeconds():e.getSeconds(),c+p+m}return(o,e)=>(i(),u("div",ot,[a("div",at,[a("div",nt,[a("img",{src:t.album.picUrl+"?param=180y180",alt:"\u5C01\u9762"},null,8,lt)]),a("div",ct,[a("p",mt,_(t.album.name),1),a("div",it,[(i(!0),u(B,null,L(t.album.artists,c=>(i(),u("p",null,_(c.name),1))),256))]),a("div",ut,[a("p",null,"\u53D1\u5E03\u65F6\u95F4\uFF1A"+_(s(t.album.publishTime)),1),t.album.subType?(i(),u("p",rt,"\u97F3\u6E90\uFF1A"+_(t.album.subType),1)):f("",!0),t.album.company?(i(),u("p",_t,"\u7248\u6743\uFF1A"+_(t.album.company),1)):f("",!0)]),a("div",dt,[t.album.description?(i(),V(Y,{key:0,text:t.album.description,end:90},null,8,["text"])):f("",!0)]),n(st)])])]))}},bt=k(pt,[["__scopeId","data-v-12c7d321"]]);const ft={key:0,class:"albumDetail"},ht={__name:"index",setup(t){let s=z("tracks");R();const o=H(),{get_album:e,get_commentAlbum:c,get_commentMore:p}=v(),{commentAlbum:m,album:r,commentMoreParams:b}=y(v());e(o.params.id),c(o.params.id),U(()=>o.params.id,()=>{o.name=="albumDetail"&&(e(o.params.id),c(o.params.id))});const h=()=>{s.value=="comments"&&(b.value.offset++,p(o.params.id))};return F(()=>{b.value.offset=1,console.log("\u5378\u8F7D")}),(gt,x)=>{const A=d("el-tab-pane"),P=d("el-tabs"),w=N("infinite-scroll");return l(r).songs?(i(),u("div",ft,[n(bt,{album:l(r).album,class:"info"},null,8,["album"]),n(P,{modelValue:l(s),"onUpdate:modelValue":x[0]||(x[0]=M=>W(s)?s.value=M:s=M),class:"tab"},{default:g(()=>[n(A,{lazy:"",label:`\u6B4C\u66F2 ${l(r).songs.length}`,name:"tracks"},{default:g(()=>[n(J,{tracks:l(r).songs,options:1,class:"songList"},null,8,["tracks"])]),_:1},8,["label"]),n(A,{lazy:"",label:`\u8BC4\u8BBA ${l(m).total}`,name:"comments"},{default:g(()=>[S(n(q,{comments:l(m).comments,hotComments:l(m).hotComments,class:"comment"},null,8,["comments","hotComments"]),[[w,h]]),S(n(O,null,null,512),[[E,l(m).total>l(m).comments.length]])]),_:1},8,["label"])]),_:1},8,["modelValue"])])):f("",!0)}}},wt=k(ht,[["__scopeId","data-v-2f8a5d81"]]);export{wt as default};
