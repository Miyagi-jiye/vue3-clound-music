import{_ as A,P as k,o as c,c as i,l as m,m as g,t as d,F as P,B as T,x as b,a as n,J as V,am as v,an as B,e as L,u as z,A as I,s as R,w as F,ad as H,r as x,b as o,k as f,p as N,v as U}from"./index.7dfac5f1.js";import{M as $}from"./MoreText.1c34bccc.js";import{P as E}from"./PlayAllButton.88a9537e.js";import{L as Y}from"./loadMore.2f9183f9.js";import{S as j}from"./songComments.1fa3f08a.js";import{S as J}from"./songList.efa6e61b.js";import"./playlist.ef26b443.js";import"./timestamp.f9a1ea68.js";import"./index.59036700.js";import"./discover.e6ba9e9b.js";const O={class:"info"},q={class:"flex"},G={class:"left"},K={alt:"\u5C01\u9762"},Q={class:"right"},W={class:"title"},X={class:"alias"},Z={class:"box"},tt={key:0},et={key:1},at={key:0,class:"description"},st={__name:"info",props:{myData:{type:Object}},setup(e){function a(s){s=s||null;let t=new Date(s),u=t.getFullYear()+"-",r=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",l=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ";return(t.getHours()<10?"0"+t.getHours():t.getHours())+"",(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+"",t.getSeconds()<10?""+t.getSeconds():t.getSeconds(),u+r+l}return(s,t)=>{const u=k("lazy");return c(),i("div",O,[m("div",q,[m("div",G,[g(m("img",K,null,512),[[u,e.myData.album.picUrl+"?param=180y180"]])]),m("div",Q,[m("p",W,d(e.myData.album.name),1),m("div",X,[(c(!0),i(P,null,T(e.myData.album.artists,r=>(c(),i("p",null,d(r.name),1))),256))]),m("div",Z,[m("p",null,"\u53D1\u5E03\u65F6\u95F4\uFF1A"+d(a(e.myData.album.publishTime)),1),e.myData.album.subType?(c(),i("p",tt,"\u97F3\u6E90\uFF1A"+d(e.myData.album.subType),1)):b("",!0),e.myData.album.company?(c(),i("p",et,"\u7248\u6743\uFF1A"+d(e.myData.album.company),1)):b("",!0)]),e.myData.album.description?(c(),i("div",at,[n($,{text:e.myData.album.description,end:90},null,8,["text"])])):b("",!0),n(E,{myData:e.myData.songs},null,8,["myData"])])])])}}},ot=A(st,[["__scopeId","data-v-c4467b2d"]]),M=V("albumDetail",{state:()=>({album:{album:{},songs:[]},commentAlbum:{comments:[],hotComments:[],total:100},commentAlbumParams:{limit:20,offset:1},commentMoreParams:{limit:20,offset:1}}),getters:{},actions:{async get_commentAlbum(e){const a=await v(e,this.commentAlbumParams);this.commentAlbum=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BC4\u8BBA",a.data)},async get_commentMore(e){const a=await v(e,this.commentMoreParams);a.data.more!=!1&&(a.data.comments.forEach(s=>{this.commentAlbum.comments.push(s)}),console.log("\u83B7\u53D6\u66F4\u591A\u4E13\u8F91\u8BC4\u8BBA",a.data))},async get_album(e){const a=await B(e);this.album=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BE6\u60C5",a.data)}},persist:!0});const nt={key:0,class:"albumDetail"},mt={__name:"index",setup(e){let a=L("tracks");z();const s=I(),{get_album:t,get_commentAlbum:u,get_commentMore:r}=M(),{commentAlbum:l,album:_,commentMoreParams:y}=R(M());t(s.params.id),u(s.params.id),F(()=>s.params.id,()=>{s.name=="albumDetail"&&(t(s.params.id),u(s.params.id))});const S=()=>{a.value=="comments"&&(y.value.offset++,r(s.params.id))};return H(()=>{y.value.offset=1,console.log("\u5378\u8F7D")}),(lt,p)=>{const h=x("el-tab-pane"),w=x("el-tabs"),C=k("infinite-scroll");return o(_).songs?(c(),i("div",nt,[n(ot,{myData:o(_),class:"info"},null,8,["myData"]),n(w,{modelValue:o(a),"onUpdate:modelValue":p[0]||(p[0]=D=>N(a)?a.value=D:a=D),class:"tab"},{default:f(()=>[n(h,{lazy:"",label:`\u6B4C\u66F2 ${o(_).songs.length}`,name:"tracks"},{default:f(()=>[n(J,{tracks:o(_).songs,options:1,class:"songList"},null,8,["tracks"])]),_:1},8,["label"]),n(h,{lazy:"",label:`\u8BC4\u8BBA ${o(l).total}`,name:"comments"},{default:f(()=>[g(n(j,{comments:o(l).comments,hotComments:o(l).hotComments,class:"comment"},null,8,["comments","hotComments"]),[[C,S]]),g(n(Y,null,null,512),[[U,o(l).total>o(l).comments.length]])]),_:1},8,["label"])]),_:1},8,["modelValue"])])):b("",!0)}}},pt=A(mt,[["__scopeId","data-v-4ef47230"]]);export{pt as default};
