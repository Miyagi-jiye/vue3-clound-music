import{_ as A,o as c,c as r,b as m,t as u,F as w,B as C,x as _,d as P,f as n,I as B,r as L,e as V,A as I,s as R,w as U,W as z,a as D,L as F,u as o,l as f,p as H,m as v,v as N}from"./index.06d72284.js";import{M as $}from"./MoreText.4846fe8d.js";import{P as E}from"./PlayAllButton.092d6376.js";import{L as Y}from"./loadMore.d8303bc9.js";import{S as j}from"./songComments.4e9e1751.js";import{S as O}from"./songList.1aca31d9.js";import{y as x,z as W}from"./login.6f02fb56.js";import"./playlist.8f69ab5e.js";import"./vue.73cea66e.js";import"./timestamp.f9a1ea68.js";import"./index.255e890c.js";import"./discover.ad43c8c6.js";const q={class:"info"},G={class:"flex"},J={class:"left"},K=["src"],Q={class:"right"},X={class:"title"},Z={class:"alias"},tt={class:"box"},et={key:0},at={key:1},st={class:"description"},ot={__name:"info",props:{myData:{type:Object,default:()=>({album:{id:0,name:"\u4E13\u8F91\u540D",picUrl:"",subType:"\u97F3\u6E90",company:"\u7248\u6743",artists:[{name:"\u6B4C\u624B"}],publishTime:123456},songs:[]})}},setup(e){function a(s){s=s||null;let t=new Date(s),i=t.getFullYear()+"-",b=(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-",l=(t.getDate()<10?"0"+t.getDate():t.getDate())+" ";return(t.getHours()<10?"0"+t.getHours():t.getHours())+"",(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+"",t.getSeconds()<10?""+t.getSeconds():t.getSeconds(),i+b+l}return(s,t)=>(c(),r("div",q,[m("div",G,[m("div",J,[m("img",{src:e.myData.album.picUrl+"?param=180y180",alt:"\u5C01\u9762"},null,8,K)]),m("div",Q,[m("p",X,u(e.myData.album.name),1),m("div",Z,[(c(!0),r(w,null,C(e.myData.album.artists,i=>(c(),r("p",null,u(i.name),1))),256))]),m("div",tt,[m("p",null,"\u53D1\u5E03\u65F6\u95F4\uFF1A"+u(a(e.myData.album.publishTime)),1),e.myData.album.subType?(c(),r("p",et,"\u97F3\u6E90\uFF1A"+u(e.myData.album.subType),1)):_("",!0),e.myData.album.company?(c(),r("p",at,"\u7248\u6743\uFF1A"+u(e.myData.album.company),1)):_("",!0)]),m("div",st,[e.myData.album.description?(c(),P($,{key:0,text:e.myData.album.description,end:90},null,8,["text"])):_("",!0)]),n(E,{myData:e.myData.songs},null,8,["myData"])])])]))}},mt=A(ot,[["__scopeId","data-v-a24a7f92"]]),M=B("albumDetail",{state:()=>({album:{album:{},songs:[]},commentAlbum:{comments:[],hotComments:[],total:100},commentAlbumParams:{limit:20,offset:1},commentMoreParams:{limit:20,offset:1}}),getters:{},actions:{async get_commentAlbum(e){const a=await x(e,this.commentAlbumParams);this.commentAlbum=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BC4\u8BBA",a.data)},async get_commentMore(e){const a=await x(e,this.commentMoreParams);a.data.more!=!1&&(a.data.comments.forEach(s=>{this.commentAlbum.comments.push(s)}),console.log("\u83B7\u53D6\u66F4\u591A\u4E13\u8F91\u8BC4\u8BBA",a.data))},async get_album(e){const a=await W(e);this.album=a.data,console.log("\u83B7\u53D6\u4E13\u8F91\u8BE6\u60C5",a.data)}}});const nt={key:0,class:"albumDetail"},lt={__name:"index",setup(e){let a=L("tracks");V();const s=I(),{get_album:t,get_commentAlbum:i,get_commentMore:b}=M(),{commentAlbum:l,album:d,commentMoreParams:g}=R(M());t(s.params.id),i(s.params.id),U(()=>s.params.id,()=>{s.name=="albumDetail"&&(t(s.params.id),i(s.params.id))});const k=()=>{a.value=="comments"&&(g.value.offset++,b(s.params.id))};return z(()=>{g.value.offset=1,console.log("\u5378\u8F7D")}),(ct,p)=>{const y=D("el-tab-pane"),S=D("el-tabs"),T=F("infinite-scroll");return o(d).songs?(c(),r("div",nt,[n(mt,{myData:o(d),class:"info"},null,8,["myData"]),n(S,{modelValue:o(a),"onUpdate:modelValue":p[0]||(p[0]=h=>H(a)?a.value=h:a=h),class:"tab"},{default:f(()=>[n(y,{lazy:"",label:`\u6B4C\u66F2 ${o(d).songs.length}`,name:"tracks"},{default:f(()=>[n(O,{tracks:o(d).songs,options:1,class:"songList"},null,8,["tracks"])]),_:1},8,["label"]),n(y,{lazy:"",label:`\u8BC4\u8BBA ${o(l).total}`,name:"comments"},{default:f(()=>[v(n(j,{comments:o(l).comments,hotComments:o(l).hotComments,class:"comment"},null,8,["comments","hotComments"]),[[T,k]]),v(n(Y,null,null,512),[[N,o(l).total>o(l).comments.length]])]),_:1},8,["label"])]),_:1},8,["modelValue"])])):_("",!0)}}},vt=A(lt,[["__scopeId","data-v-4ef47230"]]);export{vt as default};
